// SPDX-License-Identifier: MIT
pragma solidity >=0.8.0;
import { IWorld } from "solecs/interfaces/IWorld.sol";
import { PlaceConfigComponent, ID as PlaceConfigComponentID, PlaceConfig } from "components/PlaceConfigComponent.sol";
import { ColorType as Z } from "../ColorType.sol";

library PlaceConfigInitializer {
  function init(IWorld world) internal {
    PlaceConfigComponent placeConfig = PlaceConfigComponent(world.getComponent(PlaceConfigComponentID));

    // Alias these to make it easier to draw the Color map
    // ZZ.Lightpeach = Z.Lightpeach;

    Z[20][20] memory map = [
      [
        Z.White,
        Z.White,
        Z.White,
        Z.Black,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.Black,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Darkpurple,
        Z.Darkpurple,
        Z.Darkgreen,
        Z.Darkgreen
      ],
      [
        Z.Lightgrey,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.Lavender,
        Z.Lavender,
        Z.Lavender,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.Black,
        Z.Pink,
        Z.Lavender,
        Z.Lavender,
        Z.Lavender,
        Z.Lavender,
        Z.Darkgreen,
        Z.White
      ],
      [
        Z.Lightgrey,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Blue,
        Z.Blue,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.Darkgreen,
        Z.White
      ],
      [
        Z.Lightgrey,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Pink,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White
      ],
      [
        Z.Darkgrey,
        Z.Darkblue,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.Red,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White
      ],
      [
        Z.Darkgrey,
        Z.White,
        Z.White,
        Z.Pink,
        Z.Pink,
        Z.White,
        Z.White,
        Z.White,
        Z.Red,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Darkblue,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White
      ],
      [
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.Darkblue,
        Z.White,
        Z.Pink,
        Z.Pink,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.Brown,
        Z.Brown,
        Z.Pink,
        Z.White,
        Z.White
      ],
      [
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Blue,
        Z.Orange,
        Z.Orange,
        Z.Orange,
        Z.White,
        Z.Lightpeach,
        Z.Red,
        Z.Pink,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Brown,
        Z.Pink,
        Z.White,
        Z.White,
        Z.White
      ],
      [
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.Darkgrey,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Red,
        Z.Pink,
        Z.Pink,
        Z.White,
        Z.White,
        Z.Brown,
        Z.White,
        Z.White,
        Z.White,
        Z.White
      ],
      [
        Z.White,
        Z.White,
        Z.Darkblue,
        Z.White,
        Z.Darkgrey,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Red,
        Z.Pink,
        Z.Lightpeach,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.Yellow,
        Z.Yellow,
        Z.Yellow
      ],
      [
        Z.White,
        Z.Pink,
        Z.White,
        Z.White,
        Z.White,
        Z.Pink,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.Pink,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.Yellow,
        Z.Yellow,
        Z.Yellow
      ],
      [
        Z.White,
        Z.White,
        Z.Pink,
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.Pink,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.Yellow,
        Z.Lavender,
        Z.White
      ],
      [
        Z.White,
        Z.White,
        Z.Pink,
        Z.Pink,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.Pink,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.Yellow,
        Z.White,
        Z.Yellow
      ],
      [
        Z.Blue,
        Z.Darkpurple,
        Z.Orange,
        Z.Pink,
        Z.Pink,
        Z.White,
        Z.White,
        Z.Brown,
        Z.Darkgreen,
        Z.White,
        Z.Lightgrey,
        Z.Lightgrey,
        Z.White,
        Z.Pink,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.White
      ],
      [
        Z.Blue,
        Z.Darkpurple,
        Z.Orange,
        Z.White,
        Z.Pink,
        Z.White,
        Z.Black,
        Z.White,
        Z.Darkgreen,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Darkgrey,
        Z.White,
        Z.White,
        Z.White
      ],
      [
        Z.Blue,
        Z.Darkpurple,
        Z.Orange,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.Pink,
        Z.Pink,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.Darkgrey,
        Z.White,
        Z.Blue,
        Z.White
      ],
      [
        Z.Blue,
        Z.White,
        Z.Orange,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Pink,
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.Pink,
        Z.White,
        Z.White,
        Z.White
      ],
      [
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.Lightgrey,
        Z.Blue,
        Z.White,
        Z.Lightpeach,
        Z.Green,
        Z.Green,
        Z.Green,
        Z.Green,
        Z.Green,
        Z.White
      ],
      [
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.Lightpeach,
        Z.White,
        Z.Black,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.White
      ],
      [
        Z.White,
        Z.Darkblue,
        Z.White,
        Z.White,
        Z.White,
        Z.Lightpeach,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White,
        Z.White
      ]
    ];

    uint32 height = uint32(map.length);
    uint32 width = uint32(map[0].length);
    bytes memory color = new bytes(width * height);

    for (uint32 y = 0; y < height; y++) {
      for (uint32 x = 0; x < width; x++) {
        Z colorType = map[y][x];
        if (colorType == Z.Black) continue;

        color[(y * width) + x] = bytes1(uint8(colorType));
      }
    }
    placeConfig.set(PlaceConfig({ width: width, height: height, color: color }));
  }
}
